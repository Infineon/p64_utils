<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSoC64 Secure Boot Utilities Middleware Library 1.0: Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="IFXCYP_one-line.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSoC64 Secure Boot Utilities Middleware Library 1.0</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__jwt__policy__api.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Functions<div class="ingroups"><a class="el" href="group__jwt__policy.html">JWT/JSON Policy parsing</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga286fb4883f37eede854fd761f33fa336"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwt__policy__api.html#ga286fb4883f37eede854fd761f33fa336">cy_p64_find_json_item</a> (const char *path, const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *json)</td></tr>
<tr class="memdesc:ga286fb4883f37eede854fd761f33fa336"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds items by name in the whole JSON.  <a href="#ga286fb4883f37eede854fd761f33fa336">More...</a><br /></td></tr>
<tr class="separator:ga286fb4883f37eede854fd761f33fa336"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga44d7472bc24d703e1100d8b768aa345c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwt__policy__api.html#ga44d7472bc24d703e1100d8b768aa345c">cy_p64_decode_payload_data</a> (const char *jwt_packet, <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> **json_packet)</td></tr>
<tr class="memdesc:ga44d7472bc24d703e1100d8b768aa345c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes JWT payload data from the input jwt_packet to JSON object and returns pointer to this object: json_packet.  <a href="#ga44d7472bc24d703e1100d8b768aa345c">More...</a><br /></td></tr>
<tr class="separator:ga44d7472bc24d703e1100d8b768aa345c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga25ee87d623494e9745141399cd68bacf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwt__policy__api.html#ga25ee87d623494e9745141399cd68bacf">cy_p64_json_get_boolean</a> (const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *json, bool *value)</td></tr>
<tr class="memdesc:ga25ee87d623494e9745141399cd68bacf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the BOOLEAN value of a JSON object.  <a href="#ga25ee87d623494e9745141399cd68bacf">More...</a><br /></td></tr>
<tr class="separator:ga25ee87d623494e9745141399cd68bacf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab41f03a59100bfab000eb664b473e381"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwt__policy__api.html#gab41f03a59100bfab000eb664b473e381">cy_p64_json_get_uint32</a> (const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *json, uint32_t *value)</td></tr>
<tr class="memdesc:gab41f03a59100bfab000eb664b473e381"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the unsigned INTEGER value of a JSON object.  <a href="#gab41f03a59100bfab000eb664b473e381">More...</a><br /></td></tr>
<tr class="separator:gab41f03a59100bfab000eb664b473e381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga49552ca9fb95a834c32d99742b5d1a80"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwt__policy__api.html#ga49552ca9fb95a834c32d99742b5d1a80">cy_p64_json_get_string</a> (const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *json, const char **value)</td></tr>
<tr class="memdesc:ga49552ca9fb95a834c32d99742b5d1a80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the unsigned STRING value of a JSON object.  <a href="#ga49552ca9fb95a834c32d99742b5d1a80">More...</a><br /></td></tr>
<tr class="separator:ga49552ca9fb95a834c32d99742b5d1a80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19aaa54956dbbc7989c3a306bc26eb53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwt__policy__api.html#ga19aaa54956dbbc7989c3a306bc26eb53">cy_p64_json_get_array_uint8</a> (const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *json, uint8_t *buf, uint32_t size, uint32_t *olen)</td></tr>
<tr class="memdesc:ga19aaa54956dbbc7989c3a306bc26eb53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the ARRAY value, in uint8, of a JSON object.  <a href="#ga19aaa54956dbbc7989c3a306bc26eb53">More...</a><br /></td></tr>
<tr class="separator:ga19aaa54956dbbc7989c3a306bc26eb53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga523936b18ec5511deeb3f19aa1d57342"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwt__policy__api.html#ga523936b18ec5511deeb3f19aa1d57342">cy_p64_policy_get_image_record</a> (const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *json, uint32_t image_id, const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> **json_image)</td></tr>
<tr class="memdesc:ga523936b18ec5511deeb3f19aa1d57342"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the JSON object of the image_id.  <a href="#ga523936b18ec5511deeb3f19aa1d57342">More...</a><br /></td></tr>
<tr class="separator:ga523936b18ec5511deeb3f19aa1d57342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad44de2a1969579b1dbf868b3a0eeb4a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwt__policy__api.html#gad44de2a1969579b1dbf868b3a0eeb4a5">cy_p64_policy_get_image_address_and_size</a> (const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *json, uint32_t image_id, const char *image_type, uint32_t *address, uint32_t *size)</td></tr>
<tr class="memdesc:gad44de2a1969579b1dbf868b3a0eeb4a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the image address and size from the provisioning policy.  <a href="#gad44de2a1969579b1dbf868b3a0eeb4a5">More...</a><br /></td></tr>
<tr class="separator:gad44de2a1969579b1dbf868b3a0eeb4a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1db5065a2cfc27e47e1866d8da59159c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__jwt__policy__api.html#ga1db5065a2cfc27e47e1866d8da59159c">cy_p64_policy_get_image_boot_config</a> (const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *json, uint32_t image_id, bool *wdt_enable, uint32_t *wdt_timeout, bool *set_img_ok)</td></tr>
<tr class="memdesc:ga1db5065a2cfc27e47e1866d8da59159c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the image wdt configuration and image_ok from provisioning policy.  <a href="#ga1db5065a2cfc27e47e1866d8da59159c">More...</a><br /></td></tr>
<tr class="separator:ga1db5065a2cfc27e47e1866d8da59159c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga286fb4883f37eede854fd761f33fa336"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga286fb4883f37eede854fd761f33fa336">&#9670;&nbsp;</a></span>cy_p64_find_json_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a>* cy_p64_find_json_item </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *&#160;</td>
          <td class="paramname"><em>json</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds items by name in the whole JSON. </p>
<p>The name can be not unique so the function returns the first item with this name. For not unique items, it is recommended to parse JSON in two steps: the first find upper unique JSON object, then parse items in this object. Alternatively, provide a full path to the path parameter with the next token(name) &amp; index from the path, e.g.: "path:2/to/the:1/node" &ndash;&gt; "path" &amp; 2 For example: boot_upgrade/firmware/resources:1/address:1</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>A unique string name to lookup after, or full path. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">json</td><td>JSON object to check. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the pointer to the found JSON object or NULL. </dd></dl>

</div>
</div>
<a id="ga44d7472bc24d703e1100d8b768aa345c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga44d7472bc24d703e1100d8b768aa345c">&#9670;&nbsp;</a></span>cy_p64_decode_payload_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a> cy_p64_decode_payload_data </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>jwt_packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> **&#160;</td>
          <td class="paramname"><em>json_packet</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decodes JWT payload data from the input jwt_packet to JSON object and returns pointer to this object: json_packet. </p>
<p>It allocates the required space in RAM for the JSON object, so after usage the caller needs to free the JSON object by calling the <a class="el" href="group__cjson__api.html#ga3caeea01316fa73267f68ec637b4ad17" title="Deletes a cy_p64_cJSON entity and all sub-entities. ">cy_p64_cJSON_Delete()</a> function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">jwt_packet</td><td>The pointer to the JWT packet. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">json_packet</td><td>Outputs the JSON object that contains the JWT payload.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__syscall__macros.html#ga3f4d7112a86369c6933e46f3dbad09e0" title="Success operation. ">CY_P64_SUCCESS</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga22bd6e7411dbd4ab7a8afc6dab98a758" title="The parameters passed to the function are invalid. ">CY_P64_JWT_ERR_INVALID_PARAMETER</a></td><td>This error code is returned, if <code>json_packet</code> is a null pointer. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#gaadccfcb254ebc2e6a84e26a3325b52b1" title="Memory allocation for JSON string has failed. ">CY_P64_JWT_ERR_MALLOC_FAIL</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga019ef9187049cd649b5e25f8fc839ce6" title="Base64 decoding of JWT packet body has failed. ">CY_P64_JWT_ERR_B64DECODE_FAIL</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga5aea365c67764007288e1e940ef1b72d" title="JSON parse has failed. ">CY_P64_JWT_ERR_JSN_PARSE_FAIL</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#gadb1fce888378fc632101532d66e18a0b" title="An error occurred that does not correspond to any defined failure cause. ">CY_P64_JWT_ERR_OTHER</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga25ee87d623494e9745141399cd68bacf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga25ee87d623494e9745141399cd68bacf">&#9670;&nbsp;</a></span>cy_p64_json_get_boolean()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a> cy_p64_json_get_boolean </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the BOOLEAN value of a JSON object. </p>
<p>It's caller's responsibility to use the right function that matches the data type to retrieve data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">json</td><td>JSON object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">value</td><td>The pointer to the BOOLEAN value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__syscall__macros.html#ga3f4d7112a86369c6933e46f3dbad09e0" title="Success operation. ">CY_P64_SUCCESS</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga22bd6e7411dbd4ab7a8afc6dab98a758" title="The parameters passed to the function are invalid. ">CY_P64_JWT_ERR_INVALID_PARAMETER</a></td><td>This error code is returned, if <code>value</code> is a null pointer. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#gad57f7dc416c41de97b3c6ac9a6e30495" title="Invalid type of JSON object. ">CY_P64_JWT_ERR_JSN_WRONG_TYPE</a></td><td>This error code is returned, if JSON object type is not boolean. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab41f03a59100bfab000eb664b473e381"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab41f03a59100bfab000eb664b473e381">&#9670;&nbsp;</a></span>cy_p64_json_get_uint32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a> cy_p64_json_get_uint32 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the unsigned INTEGER value of a JSON object. </p>
<p>It's caller's responsibility to use the right function that matches the data type to retrieve data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">json</td><td>JSON object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">value</td><td>The pointer to the unsigned INTEGER value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__syscall__macros.html#ga3f4d7112a86369c6933e46f3dbad09e0" title="Success operation. ">CY_P64_SUCCESS</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga22bd6e7411dbd4ab7a8afc6dab98a758" title="The parameters passed to the function are invalid. ">CY_P64_JWT_ERR_INVALID_PARAMETER</a></td><td>This error code is returned, if <code>value</code> is a null pointer. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#gad57f7dc416c41de97b3c6ac9a6e30495" title="Invalid type of JSON object. ">CY_P64_JWT_ERR_JSN_WRONG_TYPE</a></td><td>This error code is returned, if JSON object type is not an integer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga49552ca9fb95a834c32d99742b5d1a80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga49552ca9fb95a834c32d99742b5d1a80">&#9670;&nbsp;</a></span>cy_p64_json_get_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a> cy_p64_json_get_string </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the unsigned STRING value of a JSON object. </p>
<p>It's caller's responsibility to use the right function that matches the data type to retrieve data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">json</td><td>The JSON object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">value</td><td>The pointer to the STRING value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__syscall__macros.html#ga3f4d7112a86369c6933e46f3dbad09e0" title="Success operation. ">CY_P64_SUCCESS</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga22bd6e7411dbd4ab7a8afc6dab98a758" title="The parameters passed to the function are invalid. ">CY_P64_JWT_ERR_INVALID_PARAMETER</a></td><td>This error code is returned, if <code>value</code> is a null pointer. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#gad57f7dc416c41de97b3c6ac9a6e30495" title="Invalid type of JSON object. ">CY_P64_JWT_ERR_JSN_WRONG_TYPE</a></td><td>This error ocde is returned, if JSON object type is not a string. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga19aaa54956dbbc7989c3a306bc26eb53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga19aaa54956dbbc7989c3a306bc26eb53">&#9670;&nbsp;</a></span>cy_p64_json_get_array_uint8()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a> cy_p64_json_get_array_uint8 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>olen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the ARRAY value, in uint8, of a JSON object. </p>
<p>It's caller's responsibility to use the right function that matches the data type to retrieve data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">json</td><td>The JSON object. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>The pointer to the buffer where to store the content. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>The available size of the buffer in bytes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">olen</td><td>The actual size used in the buffer in bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__syscall__macros.html#ga3f4d7112a86369c6933e46f3dbad09e0" title="Success operation. ">CY_P64_SUCCESS</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga22bd6e7411dbd4ab7a8afc6dab98a758" title="The parameters passed to the function are invalid. ">CY_P64_JWT_ERR_INVALID_PARAMETER</a></td><td>This error code is returned, if <code>buf</code> is a null pointer. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#gad57f7dc416c41de97b3c6ac9a6e30495" title="Invalid type of JSON object. ">CY_P64_JWT_ERR_JSN_WRONG_TYPE</a></td><td>This error code is returned, if JSON object is not an array or it contains values other than integer or None. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga523936b18ec5511deeb3f19aa1d57342"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga523936b18ec5511deeb3f19aa1d57342">&#9670;&nbsp;</a></span>cy_p64_policy_get_image_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a> cy_p64_policy_get_image_record </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>image_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> **&#160;</td>
          <td class="paramname"><em>json_image</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the JSON object of the image_id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">json</td><td>The JSON object with a policy to check. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">image_id</td><td>The image ID. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">json_image</td><td>Output JSON object that contains image configuration.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__syscall__macros.html#ga3f4d7112a86369c6933e46f3dbad09e0" title="Success operation. ">CY_P64_SUCCESS</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga22bd6e7411dbd4ab7a8afc6dab98a758" title="The parameters passed to the function are invalid. ">CY_P64_JWT_ERR_INVALID_PARAMETER</a></td><td>This error code is returned, if <code>json_image</code> is a null pointer. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga0d13be24d71aeb7ca8c5607e33fe7af6" title="JSON does not contain requested item. ">CY_P64_JWT_ERR_JSN_NONOBJ</a></td><td>This error is returned, if JSON does not contain "boot_upgrade/firmware" array </td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#gad57f7dc416c41de97b3c6ac9a6e30495" title="Invalid type of JSON object. ">CY_P64_JWT_ERR_JSN_WRONG_TYPE</a></td><td>This error is returned, if "boot_upgrade/firmware" object type is not an array </td></tr>
    <tr><td class="paramname"><a class="el" href="group__syscall__macros.html#ga94f84982017d9331bc96d65b941eb02b" title="The fail status of the Secure FlashBoot return value. ">CY_P64_INVALID</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gad44de2a1969579b1dbf868b3a0eeb4a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad44de2a1969579b1dbf868b3a0eeb4a5">&#9670;&nbsp;</a></span>cy_p64_policy_get_image_address_and_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a> cy_p64_policy_get_image_address_and_size </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>image_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>image_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the image address and size from the provisioning policy. </p>
<p>It calls <a class="el" href="group__jwt__policy__api.html#ga523936b18ec5511deeb3f19aa1d57342" title="Gets the JSON object of the image_id. ">cy_p64_policy_get_image_record()</a> function to get the image policy.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">json</td><td>JSON object with policy to check. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">image_id</td><td>The image ID. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">image_type</td><td>The image type: "BOOT", "UPGRADE" or other. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">address</td><td>Output image address. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">size</td><td>Output image size.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__syscall__macros.html#ga3f4d7112a86369c6933e46f3dbad09e0" title="Success operation. ">CY_P64_SUCCESS</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga22bd6e7411dbd4ab7a8afc6dab98a758" title="The parameters passed to the function are invalid. ">CY_P64_JWT_ERR_INVALID_PARAMETER</a></td><td>This error code is returned, if <code>address</code> or <code>size</code> is a null pointer. </td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga0d13be24d71aeb7ca8c5607e33fe7af6" title="JSON does not contain requested item. ">CY_P64_JWT_ERR_JSN_NONOBJ</a></td><td>This error is returned, if JSON does not contain "resources" array </td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#gad57f7dc416c41de97b3c6ac9a6e30495" title="Invalid type of JSON object. ">CY_P64_JWT_ERR_JSN_WRONG_TYPE</a></td><td>This error is returned, if "resources" object type is not an array </td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga5aea365c67764007288e1e940ef1b72d" title="JSON parse has failed. ">CY_P64_JWT_ERR_JSN_PARSE_FAIL</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1db5065a2cfc27e47e1866d8da59159c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1db5065a2cfc27e47e1866d8da59159c">&#9670;&nbsp;</a></span>cy_p64_policy_get_image_boot_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__syscall__t.html#ga19cdcf1c811882dca25f294532ec8ae2">cy_p64_error_codes_t</a> cy_p64_policy_get_image_boot_config </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcy__p64__c_j_s_o_n.html">cy_p64_cJSON</a> *&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>image_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>wdt_enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>wdt_timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>set_img_ok</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the image wdt configuration and image_ok from provisioning policy. </p>
<p>It calls <a class="el" href="group__jwt__policy__api.html#ga523936b18ec5511deeb3f19aa1d57342" title="Gets the JSON object of the image_id. ">cy_p64_policy_get_image_record()</a> function to get image policy. The function sets wdt_enable and set_img_ok output parameters to false if they are absent in the policy.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">json</td><td>The JSON object with the policy to check. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">image_id</td><td>The image ID. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">wdt_enable</td><td>An optional output wdt_enable config. If the set image needs to configure WDT before launching the next image. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">wdt_timeout</td><td>WDT timeout value config used for WDT configuration if wdt_enable is set. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">set_img_ok</td><td>Optional Image Ok config. When it is set to "true"<ul>
<li>CM0 pre-build image confirms image ok status in image trailer by calling <a class="el" href="group__image__api.html#ga3bfe565822d179bc42d4bfd88020609b" title="Writes the Image OK flag to the slot trailer, so CypressBootloader will not revert the new image...">cy_p64_confirm_image()</a> API, otherwise the user application needs to call this function after a successful boot.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="group__syscall__macros.html#ga3f4d7112a86369c6933e46f3dbad09e0" title="Success operation. ">CY_P64_SUCCESS</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="group__jwt__policy__error.html#ga5aea365c67764007288e1e940ef1b72d" title="JSON parse has failed. ">CY_P64_JWT_ERR_JSN_PARSE_FAIL</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>PSoC64 Secure Boot Utilities Middleware Library 1.0</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
